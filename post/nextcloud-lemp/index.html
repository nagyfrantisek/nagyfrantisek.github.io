<!doctype html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Nextcloud telepítése LEMP szerverre | Nagy</title><meta name="title" content="Nextcloud telepítése LEMP szerverre | Nagy"><meta name="description" content="Frantisek Nagy&#39;s personal website"><meta name="keywords" content="nextcloud,selfhosted,nagy,frantisek,mechanical,drawings"><meta name="author" content="Frantisek Nagy"><meta name="robots" content="index, follow"><link rel="canonical" href="https://nagy.sh/post/nextcloud-lemp/"><link rel="shortcut icon" type="image/png" href="/assets/img/favicon.png"><link rel="apple-touch-icon" href="/assets/img/apple-touch-icon.png"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Inria+Sans:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet"><link rel="stylesheet" href="/assets/css/main.css"><script async src="https://www.googletagmanager.com/gtag/js?id=G-14L9NDPXSW"></script><script>window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-14L9NDPXSW');</script></head><body class="flex flex-col h-screen bg-white text-slate-800 break-words"><header id="header" class="bg-white shadow-none w-full px-6 py-5 z-50 fixed top-0 transition-all transform ease-in-out duration-500"><div class="max-w-5xl mx-auto flex items-center flex-wrap justify-between"><div class="sm:mr-8"><a class="flex items-center" href="/"><span class="uppercase text-xl text-slate-700 font-semibold self-center">Nagy</span></a></div><nav id="menu" class="uppercase order-last md:order-none items-center flex-grow w-full md:w-auto md:flex hidden mt-2 md:mt-0"><a href="/" class="block mt-4 md:inline-block md:mt-0 font-thin text-slate-700 text-base mr-4">Jegyzetek</a> <a href="/photos" class="block mt-4 md:inline-block md:mt-0 font-thin text-slate-700 text-base mr-4">Fotók</a> <a href="/techdraws" class="block mt-4 md:inline-block md:mt-0 font-thin text-slate-700 text-base mr-4">Műszaki Rajzok</a> <a href="/about" class="block mt-4 md:inline-block md:mt-0 font-thin text-slate-700 text-base mr-4">Rólam</a></nav><div id="social" class="[&>svg]:h-5 [&>svg]:w-5 order-last sm:order-none justify-end hidden sm:block mt-6 sm:mt-0"><ul class="flex"><li><a class="text-muted inline-flex items-center p-2.5 text-sm" aria-label="Mail" href="mailto:hello@nagy.sh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5"><path d="M 2.432694,4.746721 A 1.0915742,1.0915742 0 0 0 1.3411205,5.8382946 v 0 12.3402494 a 1.0915742,1.0915742 0 0 0 1.0915735,1.091574 h 19.135288 a 1.0915742,1.0915742 0 0 0 1.091574,-1.091574 v 0 -12.35662 A 1.0915742,1.0915742 0 0 0 21.567982,4.7303505 H 2.432694 Z M 20.558281,6.8316251 12.000338,13.130009 3.4423951,6.8316251"></path></svg></a></li><li><a class="text-muted inline-flex items-center rounded-lg p-2.5 text-sm" aria-label="Instagram" href="https://instagram.com/frantisek.nagy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5"><path d="M4 4m0 4a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z"></path><path d="M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path><path d="M16.5 7.5l0 .01"></path></svg></a></li><li><a class="text-muted inline-flex items-center rounded-lg p-2.5 text-sm" aria-label="Facebook" href="https://facebook.com/nfrantisek"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5"><path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3"></path></svg></a></li><li><a class="text-muted inline-flex items-center rounded-lg p-2.5 text-sm" aria-label="nintendo" href="https://lounge.nintendo.com/friendcode/6329-0332-2133/DFq9Ggy04L"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5"><circle cx="6.5241337" cy="7.9061351" r="1.7731422" id="circle1"/><circle cx="17.475885" cy="13.121253" r="1.7731422" id="circle2"/><path d="M 10.69622,2.32594 H 6.88918 c -2.50326,0 -4.53716,2.0339 -4.53716,4.48501 v 10.3781 c 0,2.45111 2.0339,4.48501 4.53716,4.48501 h 3.80704 z"/><path d="m 17.11083,2.32594 h -3.80704 v 19.34812 h 3.80704 c 2.50326,0 4.53715,-2.0339 4.53715,-4.48501 V 6.81095 c 0,-2.45111 -2.03389,-4.48501 -4.53715,-4.48501 z"/></svg></a></li></ul></div><div id="menu-toggle" class="flex items-center md:hidden text-slate-700 hover:text-teal-600 cursor-pointer sm:ml-6"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div></div></header><main class="mx-7 lg:mx-6 mt-32 flex-grow"><article class="max-w-5xl mx-auto"><header class="mb-14"><h1 class="text-3xl text-center font-bold leading-normal text-slate-900 mt-0 mb-3">Nextcloud telepítése LEMP szerverre</h1><div class="text-center">Létrehozva: 2023. június 20. - 15:23</div><div class="mt-3 text-center"><a href="/tags/nextcloud" class="inline-block bg-slate-200 rounded-full px-3 py-1 text-sm font-medium text-slate-700 m-0.5">#nextcloud</a> <a href="/tags/selfhosted" class="inline-block bg-slate-200 rounded-full px-3 py-1 text-sm font-medium text-slate-700 m-0.5">#selfhosted</a></div><div class="mt-10 -mx-7 md:mx-0"><img class="w-full max-w-2xl mx-auto" src="/assets/img/nextcloud.jpg" width="960" height="500" alt="This post thumbnail"></div></header><div id="content" class="prose text-slate-800 max-w-screen-md m-auto"><p>Az alábbi lépésről lépésre bemutatott tutorial segítségével telepíthetsz egy <strong>Nextcloud</strong> szervert egy <strong>Ubuntu</strong> alapú rendszeren, <strong>Nginx</strong> webszerver használatával.</p><h3>1. <strong>Szükséges csomagok telepítése</strong></h3><p>Győződj meg róla, hogy a rendszered naprakész, és van hozzáférésed egy terminálhoz.</p><ol><li><p>Frissítsd a rendszert és telepítsd a szükséges csomagokat:</p><pre><code class="language-bash">sudo apt update &amp;&amp; sudo apt upgrade -y
sudo apt install nginx mariadb-server php-fpm unzip curl -y
</code></pre></li><li><p>Engedélyezd az Nginx automatikus indítását:</p><pre><code class="language-bash">sudo systemctl enable nginx
sudo systemctl start nginx
</code></pre></li></ol><h3>2. <strong>MariaDB telepítése és konfigurálása</strong></h3><p>A Nextcloud működéséhez szükség van egy adatbázisra. Ehhez MariaDB-t fogunk használni.</p><ol><li><p>Indítsd el a MariaDB-t:</p><pre><code class="language-bash">sudo systemctl start mariadb
</code></pre></li><li><p>Futtasd a biztonsági scriptet:</p><pre><code class="language-bash">sudo mysql_secure_installation
</code></pre><p>Ezt követően válaszolj a kérdésekre a biztonság növelése érdekében:</p><ul><li>Nyomj Entert a jelenlegi root jelszó kihagyásához (alapértelmezett jelszó nincs).</li><li>Válaszolj 'Y'-nal az új root jelszó beállításához.</li><li>A további kérdéseknél mindegyikre 'Y' válasz javasolt.</li></ul></li><li><p>Lépj be a MariaDB shell-be:</p><pre><code class="language-bash">sudo mysql -u root -p
</code></pre></li><li><p>Hozz létre egy adatbázist és felhasználót a Nextcloud számára:</p><pre><code class="language-sql">CREATE DATABASE nextcloud;
CREATE USER 'nextclouduser'@'localhost' IDENTIFIED BY 'jelszo';
GRANT ALL PRIVILEGES ON nextcloud.* TO 'nextclouduser'@'localhost';
FLUSH PRIVILEGES;
EXIT;
</code></pre></li></ol><h3>3. <strong>PHP telepítése és konfigurálása</strong></h3><p>A Nextcloudnak szüksége van PHP-re. Telepítsük a szükséges PHP modulokat.</p><ol><li><p>Telepítsd a PHP és a szükséges bővítményeket:</p><pre><code class="language-bash">sudo apt install php-fpm php-mysql php-xml php-mbstring php-curl php-gd php-zip php-intl php-imagick php-bcmath php-gmp -y
</code></pre></li><li><p>Nyisd meg a PHP konfigurációs fájlt a szerkesztéshez:</p><pre><code class="language-bash">sudo nano /etc/php/8.1/fpm/php.ini
</code></pre><p>A következő beállításokat módosítsd:</p><ul><li><code>memory_limit = 512M</code></li><li><code>upload_max_filesize = 100M</code></li><li><code>post_max_size = 100M</code></li><li><code>max_execution_time = 300</code></li></ul></li><li><p>Indítsd újra a PHP-FPM szolgáltatást:</p><pre><code class="language-bash">sudo systemctl restart php8.1-fpm
</code></pre></li></ol><h3>4. <strong>Nextcloud letöltése és telepítése</strong></h3><ol><li>Töltsd le a Nextcloud legújabb verzióját:<pre><code class="language-bash">cd /var/www/
sudo curl -o nextcloud.zip https://download.nextcloud.com/server/releases/latest.zip
sudo unzip nextcloud.zip
sudo chown -R www-data:www-data nextcloud/
sudo chmod -R 755 nextcloud/
</code></pre></li></ol><h3>5. <strong>Nginx konfigurálása</strong></h3><ol><li><p>Hozz létre egy új Nginx konfigurációs fájlt:</p><pre><code class="language-bash">sudo nano /etc/nginx/sites-available/nextcloud
</code></pre></li><li><p>Másold be a következő konfigurációt a fájlba:</p><pre><code class="language-nginx">server {
    listen 80;
    server_name nextcloud.example.com;

    root /var/www/nextcloud;
    index index.php index.html index.htm;

    location / {
        try_files $uri $uri/ /index.php$request_uri;
    }

    location ~ ^/\.well-known/acme-challenge/ {
        allow all;
    }

    location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)/ {
        deny all;
    }

    location ~ \.php$ {
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }

    location ~ /\.ht {
        deny all;
    }

    client_max_body_size 100M;
    fastcgi_buffers 64 4K;
}
</code></pre></li><li><p>Kapcsold be az új konfigurációt:</p><pre><code class="language-bash">sudo ln -s /etc/nginx/sites-available/nextcloud /etc/nginx/sites-enabled/
</code></pre></li><li><p>Teszteld az Nginx konfigurációt és indítsd újra a szervert:</p><pre><code class="language-bash">sudo nginx -t
sudo systemctl restart nginx
</code></pre></li></ol><h3>6. <strong>SSL telepítése Let’s Encrypt-tel</strong></h3><p>A biztonságos kapcsolat érdekében telepítünk egy ingyenes SSL tanúsítványt a Let's Encrypt segítségével.</p><ol><li><p>Telepítsd a <code>certbot</code> csomagot:</p><pre><code class="language-bash">sudo apt install certbot python3-certbot-nginx -y
</code></pre></li><li><p>Futtasd a <code>certbot</code> parancsot az SSL tanúsítvány megszerzéséhez:</p><pre><code class="language-bash">sudo certbot --nginx -d nextcloud.example.com
</code></pre></li><li><p>Kövesd a kérdéseket, és végül az Nginx-et újraindítja automatikusan.</p></li></ol><h3>7. <strong>Nextcloud telepítési folyamat befejezése</strong></h3><p>Nyisd meg a böngészőt és látogasd meg a szerveredet a domain névvel (pl. <code>https://nextcloud.example.com</code>), majd kövesd az utasításokat a telepítő varázslóban:</p><ol><li>Adj meg egy adminisztrátori felhasználónevet és jelszót.</li><li>Állítsd be az adatbázis kapcsolatot:<ul><li>Adatbázis típus: <strong>MySQL/MariaDB</strong></li><li>Adatbázis név: <code>nextcloud</code></li><li>Felhasználónév: <code>nextclouduser</code></li><li>Jelszó: az előzőleg megadott jelszó</li><li>Szerver: <code>localhost</code></li></ul></li></ol><p>Kattints a <strong>Telepítés</strong> gombra, és készen is van a Nextcloud szervered!</p><h3>8. <strong>További konfigurációk</strong></h3><ul><li><strong>Cron beállítása</strong>: A Nextcloud időzített feladataihoz állíts be egy cron jobot.<pre><code class="language-bash">sudo crontab -u www-data -e
</code></pre>Adj hozzá egy cron bejegyzést:<pre><code class="language-bash">*/5 * * * * php -f /var/www/nextcloud/cron.php
</code></pre></li></ul></div></article></main><footer class="mt-20 px-10 py-8"><div class="max-w-5xl mx-auto text-zinc-400 text-center uppercase italic font-thin">"What doesn't kill you makes you smaller" (Super Mario)</div></footer><script src="/assets/js/bundle.js"></script></body></html>